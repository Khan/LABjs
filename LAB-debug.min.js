/*! LAB.js (LABjs :: Loading And Blocking JavaScript)
    v2.0.3 (c) Kyle Simpson
    MIT License
*/
(function(e){var t=e.$LAB,n="UseLocalXHR",r="AlwaysPreserveOrder",i="AllowDuplicates",s="CacheBust",c="Debug",a="BasePath",o="ErrorHandler",f=/^[^?#]*\//.exec(location.href)[0],l=/^\w+\:\/\/\/?[^\/]+/.exec(f)[0],u=document.head||document.getElementsByTagName("head"),d=e.opera&&Object.prototype.toString.call(e.opera)=="[object Opera]"||"MozAppearance"in document.documentElement.style,p=function(){},h=p,y=document.createElement("script"),g=typeof y.preload=="boolean",m=g||y.readyState&&y.readyState=="uninitialized",_=!m&&y.async===true,v=!m&&!_&&!d;if(e.console&&e.console.log){if(!e.console.error)e.console.error=e.console.log;p=function(t){e.console.log(t)};h=function(t,n){e.console.error(t,n)}}function x(e){return Object.prototype.toString.call(e)=="[object Function]"}function w(e){return Object.prototype.toString.call(e)=="[object Array]"}function b(e,t){var n=/^\w+\:\/\//;if(/^\/\/\/?/.test(e)){e=location.protocol+e}else if(!n.test(e)&&e.charAt(0)!="/"){e=(t||"")+e}return n.test(e)?e:(e.charAt(0)=="/"?l:f)+e}function S(e,t){for(var n in e){if(e.hasOwnProperty(n)){t[n]=e[n]}}return t}function B(e){var t=false;for(var n=0;n<e.scripts.length;n++){if(e.scripts[n].ready&&e.scripts[n].exec_trigger){t=true;e.scripts[n].exec_trigger();e.scripts[n].exec_trigger=null}}return t}function A(e,t,n,r){e.onload=e.onreadystatechange=function(){if(e.readyState&&e.readyState!="complete"&&e.readyState!="loaded"||t[n])return;e.onload=e.onreadystatechange=null;r()}}function L(e){e.ready=e.finished=true;for(var t=0;t<e.finished_listeners.length;t++){e.finished_listeners[t]()}e.ready_listeners=[];e.finished_listeners=[]}function O(e,t,r,i,s){setTimeout(function(){var a,o=t.real_src,f;if("item"in u){if(!u[0]){setTimeout(arguments.callee,25);return}u=u[0]}a=document.createElement("script");if(t.type)a.type=t.type;if(t.charset)a.charset=t.charset;if(s){if(m){if(e[c])p("start script preload: "+o);r.elem=a;if(g){a.preload=true;a.onpreload=i}else{a.onreadystatechange=function(){if(a.readyState=="loaded")i()}}a.src=o}else if(s&&o.indexOf(l)==0&&e[n]){f=new XMLHttpRequest;if(e[c])p("start script preload (xhr): "+o);f.onreadystatechange=function(){if(f.readyState==4){f.onreadystatechange=function(){};r.text=f.responseText+"\n//@ sourceURL="+o;i()}};f.open("GET",o);f.send()}else{if(e[c])p("start script preload (cache): "+o);a.type="text/cache-script";A(a,r,"ready",function(){u.removeChild(a);i()});a.src=o;u.insertBefore(a,u.firstChild)}}else if(_){if(e[c])p("start script load (ordered async): "+o);a.async=false;A(a,r,"finished",i);a.src=o;u.insertBefore(a,u.firstChild)}else{if(e[c])p("start script load: "+o);A(a,r,"finished",i);a.src=o;u.insertBefore(a,u.firstChild)}},0)}function E(){var f={},l=m||v,d=[],y={},g;f[n]=true;f[r]=false;f[i]=false;f[s]=false;f[c]=false;f[a]="";f[o]=function(){};function _(e,t,n){var r;function s(){if(r!=null){r=null;L(n)}}if(y[t.src].finished)return;if(!e[i])y[t.src].finished=true;r=n.elem||document.createElement("script");if(t.type)r.type=t.type;if(t.charset)r.charset=t.charset;A(r,n,"finished",s);if(n.elem){n.elem=null}else if(n.text){r.onload=r.onreadystatechange=null;r.text=n.text}else{r.src=t.real_src}u.insertBefore(r,u.firstChild);if(n.text){s()}}function C(e,t,n,r){var c,o,f=function(){t.ready_cb(t,function(){_(e,t,c)})},l=function(){t.finished_cb(t,n)};t.src=b(t.src,e[a]);t.real_src=t.src+(e[s]?(/\?.*$/.test(t.src)?"&_":"?_")+~~(Math.random()*1e9)+"=":"");if(!y[t.src])y[t.src]={items:[],finished:false};o=y[t.src].items;if(e[i]||o.length==0){c=o[o.length]={ready:false,finished:false,ready_listeners:[f],finished_listeners:[l]};O(e,t,c,r?function(){c.ready=true;for(var e=0;e<c.ready_listeners.length;e++){c.ready_listeners[e]()}c.ready_listeners=[]}:function(){L(c)},r)}else{c=o[0];if(c.finished){l()}else{c.finished_listeners.push(l)}}}function j(){var e,t=S(f,{}),n=[],i=0,s=false,a;function u(e,n){if(t[c])p("script preload finished: "+e.real_src);e.ready=true;e.exec_trigger=n;y()}function d(e,n){if(t[c])p("script execution finished: "+e.real_src);e.ready=e.finished=true;e.exec_trigger=null;for(var r=0;r<n.scripts.length;r++){if(!n.scripts[r].finished)return}n.finished=true;y()}function y(){while(i<n.length){if(x(n[i])){if(t[c])p("$LAB.wait() executing: "+n[i]);try{n[i++]()}catch(e){t[o](e);if(t[c])h("$LAB.wait() error caught: ",e)}continue}else if(!n[i].finished){if(B(n[i]))continue;break}i++}if(i==n.length){s=false;a=false}}function g(){if(!a||!a.scripts){n.push(a={scripts:[],finished:true})}}e={script:function(){for(var n=0;n<arguments.length;n++){(function(n,i){var c;if(!w(n)){i=[n]}for(var o=0;o<i.length;o++){g();n=i[o];if(x(n))n=n();if(!n)continue;if(w(n)){c=[].slice.call(n);c.unshift(o,1);[].splice.apply(i,c);o--;continue}if(typeof n=="string")n={src:n};n=S(n,{ready:false,ready_cb:u,finished:false,finished_cb:d});a.finished=false;a.scripts.push(n);C(t,n,a,l&&s);s=true;if(t[r])e.wait()}})(arguments[n],arguments[n])}return e},wait:function(){if(arguments.length>0){for(var t=0;t<arguments.length;t++){n.push(arguments[t])}a=n[n.length-1]}else a=false;y();return e}};return{script:e.script,wait:e.wait,setOptions:function(n){S(n,t);return e}}}g={setGlobalDefaults:function(e){S(e,f);return g},setOptions:function(){return j().setOptions.apply(null,arguments)},script:function(){return j().script.apply(null,arguments)},wait:function(){return j().wait.apply(null,arguments)},queueScript:function(){d[d.length]={type:"script",args:[].slice.call(arguments)};return g},queueWait:function(){d[d.length]={type:"wait",args:[].slice.call(arguments)};return g},runQueue:function(){var e=g,t=d.length,n=t,r;for(;--n>=0;){r=d.shift();e=e[r.type].apply(null,r.args)}return e},noConflict:function(){e.$LAB=t;return g},sandbox:function(){return E()}};return g}e.$LAB=E();(function(e,t,n){if(document.readyState==null&&document[e]){document.readyState="loading";document[e](t,n=function(){document.removeEventListener(t,n,false);document.readyState="complete"},false)}})("addEventListener","DOMContentLoaded")})(this);
